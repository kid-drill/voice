<!DOCTYPE html>
<html lang="ja">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Voice Recognition & Synthesis</title>
	<style>
		body {
			text-align: center;
		}
	</style>
</head>
<body>
	<h3>Voice Recognition & Synthesis</h3>
	<button id="btn-recog"><img src="img/microphone-on.png" alt="Recognition Start"></button>
	<br>
	<input id="txt-voice" type="text" value="こんばんは">
	<br>
	<button id="btn-synthe" onclick="speak();"><img src="img/speaker-on.png" alt="Synthesis Start"></button>
	<script type="text/javascript">
		var btr = document.getElementById('btn-recog');
		var txv = document.getElementById('txt-voice');
			
		var recog = new webkitSpeechRecognition();
		recog.lang = 'ja-JP';
		
		btr.addEventListener('click', function() {
			recog.start();
		});
		
		recog.addEventListener('result', function(e) {
			console.log(e);
			txv.value = e.results[0][0].transcript;
		});
		
		function speak(){
			console.log(txv.value);
			speechSynthesis.speak(new SpeechSynthesisUtterance(txv.value));
			//speechSynthesis.speak(new SpeechSynthesisUtterance('こんにちは'));
		}
	</script>
</body>
</html>
